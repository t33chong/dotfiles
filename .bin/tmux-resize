#!/bin/bash

# Expected width & height values:
# 1050 x 1680: 148 x 118 (Acer)
# 1920 x 2160: 191 x 104 (Lenovo 1/2)
# 2560 x 1600: 204 x 59 (Native)
# 1920 x 1080: 272 x 75 (ViewSonic)
# 3840 x 2160: 383 x 106 (Lenovo)

# Copy current layout:
# tmux lsw -F "#{window_active} #{window_layout}" | grep "^1" | awk '{print $2}' | tr -d '\n' | pbcopy

width="$(tmux display-message -p '#{window_width}')"
height="$(tmux display-message -p '#{window_height}')"
panes="$(tmux display-message -p '#{window_panes}')"

acer1="a6ed,148x118,0,0,0"
acer2="9fad,148x118,0,0[148x58,0,0,0,148x59,0,59,13]"
acer3="036d,148x118,0,0[148x38,0,0,0,148x38,0,39,14,148x40,0,78,13]"
acer4="459e,148x118,0,0{74x118,0,0[74x59,0,0,0,74x58,0,60,15],73x118,75,0[73x59,75,0,14,73x58,75,60,13]}"

lenovo1="ce5b,383x106,0,0,24"
lenovo2="a98d,383x106,0,0{191x106,0,0,24,191x106,192,0,25}"
lenovo3="601e,383x106,0,0{127x106,0,0,24,127x106,128,0,25,127x106,256,0,26}"
lenovo4="b083,383x106,0,0{95x106,0,0,24,95x106,96,0,27,95x106,192,0,25,95x106,288,0,26}"
lenovo5="c41e,383x106,0,0{95x106,0,0,24,95x106,96,0,27,95x106,192,0,25,95x106,288,0[95x53,288,0,26,95x52,288,54,28]}"
lenovo6="8343,383x106,0,0{95x106,0,0[95x53,0,0,24,95x52,0,54,29],95x106,96,0,27,95x106,192,0,25,95x106,288,0[95x53,288,0,26,95x52,288,54,28]}"
lenovo7="728f,383x106,0,0{95x106,0,0[95x53,0,0,24,95x52,0,54,29],95x106,96,0,27,95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x53,288,0,26,95x52,288,54,28]}"
lenovo8="1403,383x106,0,0{95x106,0,0[95x53,0,0,24,95x52,0,54,29],95x106,96,0[95x53,96,0,27,95x52,96,54,31],95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x53,288,0,26,95x52,288,54,28]}"
lenovo9="e1bc,383x106,0,0{95x106,0,0[95x53,0,0,24,95x52,0,54,29],95x106,96,0[95x53,96,0,27,95x52,96,54,31],95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x53,288,0,26,95x26,288,54,28,95x25,288,81,32]}"
lenovo10="078f,383x106,0,0{95x106,0,0[95x53,0,0,24,95x52,0,54,29],95x106,96,0[95x53,96,0,27,95x52,96,54,31],95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x26,288,0,26,95x26,288,27,33,95x26,288,54,28,95x25,288,81,32]}"
lenovo11="17cd,383x106,0,0{95x106,0,0[95x53,0,0,24,95x26,0,54,29,95x25,0,81,34],95x106,96,0[95x53,96,0,27,95x52,96,54,31],95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x26,288,0,26,95x26,288,27,33,95x26,288,54,28,95x25,288,81,32]}"
lenovo12="d2ac,383x106,0,0{95x106,0,0[95x26,0,0,24,95x26,0,27,35,95x26,0,54,29,95x25,0,81,34],95x106,96,0[95x53,96,0,27,95x52,96,54,31],95x106,192,0[95x53,192,0,25,95x52,192,54,30],95x106,288,0[95x26,288,0,26,95x26,288,27,33,95x26,288,54,28,95x25,288,81,32]}"

lenovohalf1="93d2,191x104,0,0,5"
lenovohalf2="2e81,191x104,0,0{95x104,0,0,5,95x104,96,0,6}"
lenovohalf3="e008,191x104,0,0{95x104,0,0,5,95x104,96,0[95x52,96,0,6,95x51,96,53,7]}"
lenovohalf4="885c,191x104,0,0{95x104,0,0[95x52,0,0,5,95x51,0,53,8],95x104,96,0[95x52,96,0,6,95x51,96,53,7]}"
lenovohalf5="f64f,191x104,0,0{95x104,0,0[95x52,0,0,5,95x51,0,53,8],95x104,96,0[95x26,96,0,6,95x25,96,27,9,95x51,96,53,7]}"
lenovohalf6="b5be,191x104,0,0{95x104,0,0[95x52,0,0,5,95x51,0,53,8],95x104,96,0[95x26,96,0,6,95x25,96,27,9,95x25,96,53,7,95x25,96,79,10]}"
lenovohalf7="cc2e,191x104,0,0{95x104,0,0[95x26,0,0,5,95x25,0,27,11,95x51,0,53,8],95x104,96,0[95x26,96,0,6,95x25,96,27,9,95x25,96,53,7,95x25,96,79,10]}"
lenovohalf8="1df7,191x104,0,0{95x104,0,0[95x26,0,0,5,95x25,0,27,11,95x25,0,53,8,95x25,0,79,12],95x104,96,0[95x26,96,0,6,95x25,96,27,9,95x25,96,53,7,95x25,96,79,10]}"

native1="34f7,204x59,0,0,155"
native2="4c20,204x59,0,0{102x59,0,0,133,101x59,103,0,134}"
native3="e39a,204x59,0,0{102x59,0,0,133,101x59,103,0[101x29,103,0,134,101x29,103,30,138]}"
native4="6616,204x59,0,0{102x59,0,0[102x29,0,0,133,102x29,0,30,139],101x59,103,0[101x29,103,0,134,101x29,103,30,138]}"
native5="8422,204x59,0,0{102x59,0,0[102x29,0,0,133,102x29,0,30,139],101x59,103,0[101x29,103,0,134,101x14,103,30,138,101x14,103,45,140]}"
native6="e02f,204x59,0,0{102x59,0,0[102x29,0,0,155,102x29,0,30,157],101x59,103,0[101x14,103,0,156,101x14,103,15,161,101x14,103,30,158,101x14,103,45,160]}"
native7="2279,204x59,0,0{102x59,0,0[102x29,0,0,155,102x14,0,30,157,102x14,0,45,162],101x59,103,0[101x14,103,0,156,101x14,103,15,161,101x14,103,30,158,101x14,103,45,160]}"
native8="e68c,204x59,0,0{102x59,0,0[102x14,0,0,155,102x14,0,15,163,102x14,0,30,157,102x14,0,45,162],101x59,103,0[101x14,103,0,156,101x14,103,15,161,101x14,103,30,158,101x14,103,45,160]}"

viewsonic1="c75d,272x75,0,0,0"
viewsonic2="21c5,272x75,0,0{136x75,0,0,0,135x75,137,0,16}"
viewsonic3="93a0,272x75,0,0{90x75,0,0,0,90x75,91,0,17,90x75,182,0,16}"
viewsonic4="e2c9,272x75,0,0{90x75,0,0,0,90x75,91,0,17,90x75,182,0[90x37,182,0,16,90x37,182,38,19]}"
viewsonic5="2a39,272x75,0,0{90x75,0,0,0,90x75,91,0[90x37,91,0,17,90x37,91,38,20],90x75,182,0[90x37,182,0,16,90x37,182,38,19]}"
viewsonic6="9dd9,272x75,0,0{90x75,0,0[90x37,0,0,0,90x37,0,38,21],90x75,91,0[90x37,91,0,17,90x37,91,38,20],90x75,182,0[90x37,182,0,16,90x37,182,38,19]}"
viewsonic7="6949,272x75,0,0{90x75,0,0[90x37,0,0,0,90x37,0,38,21],90x75,91,0[90x37,91,0,17,90x37,91,38,20],90x75,182,0[90x37,182,0,16,90x18,182,38,19,90x18,182,57,22]}"
viewsonic8="74b9,272x75,0,0{90x75,0,0[90x37,0,0,0,90x37,0,38,21],90x75,91,0[90x37,91,0,17,90x37,91,38,20],90x75,182,0[90x18,182,0,16,90x18,182,19,23,90x18,182,38,19,90x18,182,57,22]}"

layout() {
  if (( width < 180 )); then # Acer
    case $panes in
      1) echo $acer1 ;;
      2) echo $acer2 ;;
      3) echo $acer3 ;;
      4) echo $acer4 ;;
      *) echo "tiled" ;;
    esac
  elif (( width < 200 )); then # Lenovo 1/2
    case $panes in
      1) echo $lenovohalf1 ;;
      2) echo $lenovohalf2 ;;
      3) echo $lenovohalf3 ;;
      4) echo $lenovohalf4 ;;
      5) echo $lenovohalf5 ;;
      6) echo $lenovohalf6 ;;
      7) echo $lenovohalf7 ;;
      8) echo $lenovohalf8 ;;
      *) echo "tiled" ;;
    esac
  elif (( width < 220 )); then # Native
    case $panes in
      1) echo $native1 ;;
      2) echo $native2 ;;
      3) echo $native3 ;;
      4) echo $native4 ;;
      5) echo $native5 ;;
      6) echo $native6 ;;
      7) echo $native7 ;;
      8) echo $native8 ;;
      *) echo "tiled" ;;
    esac
  elif (( width < 360 )); then # ViewSonic
    case $panes in
      1) echo $viewsonic1 ;;
      2) echo $viewsonic2 ;;
      3) echo $viewsonic3 ;;
      4) echo $viewsonic4 ;;
      5) echo $viewsonic5 ;;
      6) echo $viewsonic6 ;;
      7) echo $viewsonic7 ;;
      8) echo $viewsonic8 ;;
      *) echo "tiled" ;;
    esac
  else # Lenovo
    case $panes in
      1) echo $lenovo1 ;;
      2) echo $lenovo2 ;;
      3) echo $lenovo3 ;;
      4) echo $lenovo4 ;;
      5) echo $lenovo5 ;;
      6) echo $lenovo6 ;;
      7) echo $lenovo7 ;;
      8) echo $lenovo8 ;;
      9) echo $lenovo9 ;;
      10) echo $lenovo10 ;;
      11) echo $lenovo11 ;;
      12) echo $lenovo12 ;;
      *) echo "tiled" ;;
    esac
  fi
}

tmux select-layout "$(layout)"
